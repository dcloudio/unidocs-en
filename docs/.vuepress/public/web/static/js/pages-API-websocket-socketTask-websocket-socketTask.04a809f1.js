(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-API-websocket-socketTask-websocket-socketTask"],{"10f5":function(e,n,t){"use strict";t("d3b7"),t("e25e"),t("25f0"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=uni.getSystemInfoSync().platform,s={data:function(){return{connected:!1,connecting:!1,socketTask:!1,msg:!1}},computed:{showMsg:function(){return this.connected?this.msg?"Receive message："+this.msg:"Waiting to receive messages":"Not yet connected"}},onUnload:function(){uni.hideLoading(),this.socketTask&&this.socketTask.close&&this.socketTask.close()},methods:{connect:function(){var e=this;if(this.connected||this.connecting)return uni.showModal({content:"Connecting or already connected, please do not connect again",showCancel:!1}),!1;this.connecting=!0,uni.showLoading({title:"Connecting..."}),this.socketTask=uni.connectSocket({url:"wss://echo.websocket.org",data:function(){return{msg:"Hello"}},success:function(e){},fail:function(e){}}),console.log(this.socketTask),this.socketTask.onOpen((function(n){e.connecting=!1,e.connected=!0,uni.hideLoading(),uni.showToast({icon:"none",title:"Connection successful"}),console.log("onOpen",n)})),this.socketTask.onError((function(n){e.connecting=!1,e.connected=!1,uni.hideLoading(),uni.showModal({content:"Connection failed, websocket service may not be available, please try again later",showCancel:!1}),console.log("onError",n)})),this.socketTask.onMessage((function(n){e.msg=n.data,console.log("onMessage",n)})),this.socketTask.onClose((function(n){e.connected=!1,e.startRecive=!1,e.socketTask=!1,e.msg=!1,console.log("onClose",n)})),console.log("task",this.socketTask)},send:function(){this.socketTask.send({data:"from "+o+" : "+parseInt(1e4*Math.random()).toString(),success:function(e){console.log(e)},fail:function(e){console.log(e)}})},close:function(){this.socketTask&&this.socketTask.close&&this.socketTask.close()}}};n.default=s},2503:function(e,n,t){var o=t("24fb");n=o(!1),n.push([e.i,".uni-btn-v[data-v-41211032]{padding:%?10?% 0}.uni-btn-v uni-button[data-v-41211032]{margin:%?20?% 0}.websocket-msg[data-v-41211032]{padding:40px 0;text-align:center;font-size:14px;line-height:40px;color:#666}.websocket-tips[data-v-41211032]{padding:40px 0;text-align:center;font-size:14px;line-height:24px;color:#666}",""]),e.exports=n},"29b5":function(e,n,t){"use strict";var o=t("7532"),s=t.n(o);s.a},7532:function(e,n,t){var o=t("2503");"string"===typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);var s=t("4f06").default;s("0ebc11aa",o,!0,{sourceMap:!1,shadowMode:!1})},"96c3":function(e,n,t){"use strict";t.d(n,"b",(function(){return s})),t.d(n,"c",(function(){return c})),t.d(n,"a",(function(){return o}));var o={pageHead:t("524e").default},s=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("v-uni-view",[t("page-head",{attrs:{title:"websocket通讯示例"}}),t("v-uni-view",{staticClass:"uni-padding-wrap"},[t("v-uni-view",{staticClass:"uni-btn-v"},[t("v-uni-view",{staticClass:"websocket-msg"},[e._v(e._s(e.showMsg))]),t("v-uni-button",{attrs:{type:"primary"},on:{click:function(n){arguments[0]=n=e.$handleEvent(n),e.connect.apply(void 0,arguments)}}},[e._v("Connecting to websocket services")]),t("v-uni-button",{directives:[{name:"show",rawName:"v-show",value:e.connected,expression:"connected"}],attrs:{type:"primary"},on:{click:function(n){arguments[0]=n=e.$handleEvent(n),e.send.apply(void 0,arguments)}}},[e._v("Send a message")]),t("v-uni-button",{attrs:{type:"primary"},on:{click:function(n){arguments[0]=n=e.$handleEvent(n),e.close.apply(void 0,arguments)}}},[e._v("Disconnect websocket service")]),t("v-uni-view",{staticClass:"websocket-tips"},[e._v("After sending a message you will receive a message back from the server (with the same content as the message sent)")])],1)],1)],1)},c=[]},e388:function(e,n,t){"use strict";t.r(n);var o=t("96c3"),s=t("e6bd");for(var c in s)"default"!==c&&function(e){t.d(n,e,(function(){return s[e]}))}(c);t("29b5");var i,a=t("f0c5"),u=Object(a["a"])(s["default"],o["b"],o["c"],!1,null,"41211032",null,!1,o["a"],i);n["default"]=u.exports},e6bd:function(e,n,t){"use strict";t.r(n);var o=t("10f5"),s=t.n(o);for(var c in o)"default"!==c&&function(e){t.d(n,e,(function(){return o[e]}))}(c);n["default"]=s.a}}]);