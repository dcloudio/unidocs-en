> 自 HBuilderX 2.0.0 起支持，[使用指南](https://ask.dcloud.net.cn/article/36010)
> Supported by HBuilderX 2.0.0+, [User Guide](https://ask.dcloud.net.cn/article/36010)

### uni.$emit(eventName,OBJECT)

触发全局的自定义事件，附加参数都会传给监听器回调函数。
When global custom events are triggered, additional parameters will be passed to the listener callback function.

|属性		|类型	|描述				|
| Attribute| Type| Describe|
|---		|---	|---				|
|eventName	|String	|事件名				|
| eventName| String| Event name|
|OBJECT		|Object	|触发事件携带的附加参数	|
| OBJECT| Object| Additional parameters carried by triggering events|

**代码示例**
**Code example**
```javascript
	uni.$emit('update',{msg:'页面更新'})
```


### uni.$on(eventName,callback)

监听全局的自定义事件，事件由 `uni.$emit` 触发，回调函数会接收事件触发函数的传入参数。
listen to the global custom event triggered by `uni.$emit`, and the callback function receives the parameters passed in to the event trigger function.

|属性		|类型		|描述			|
| Attribute| Type| Describe|
|---		|---		|---			|
|eventName	|String		|事件名			|
| eventName| String| Event name|
|callback	|Function	|事件的回调函数	|
| callback| Function| Event callback function|


**代码示例**
**Code example**
```javascript
	uni.$on('update',function(data){
		console.log('监听到事件来自 update ，携带参数 msg 为：' + data.msg);
	})
```


### uni.$once(eventName,callback)

监听全局的自定义事件，事件由 `uni.$emit` 触发，但仅触发一次，在第一次触发之后移除该监听器。
listen to the global custom events generated by `uni.$emit`, but only once, and remove the listener after the first trigger.

|属性		|类型		|描述			|
| Attribute| Type| Describe|
|---		|---		|---			|
|eventName	|String		|事件名			|
| eventName| String| Event name|
|callback	|Function	|事件的回调函数	|
| callback| Function| Event callback function|


**代码示例**
**Code example**
```javascript
	uni.$once('update',function(data){
		console.log('监听到事件来自 update ，携带参数 msg 为：' + data.msg);
	})
```

### uni.$off([eventName, callback])

移除全局自定义事件监听器。
Remove the global custom event listener.

|属性		|类型			|描述			|
| Attribute| Type| Describe|
|---		|---			|---			|
|eventName	|Array＜String＞ |事件名			|
| eventName| Array＜String＞| Event name|
|callback	|Function		|事件的回调函数	|
| callback| Function| Event callback function|

**Tips**
- 如果uni.$off没有传入参数，则移除App级别的所有事件监听器；
- If uni.$off does not pass in parameters, remove all event listeners at App level;
- 如果只提供了事件名（eventName），则移除该事件名对应的所有监听器；
- If only the event name (eventName) is provided, remove all listeners corresponding to the event name;
- 如果同时提供了事件与回调，则只移除这个事件回调的监听器；
- If both event and callback are provided, only the listener of this event callback will be removed;
- 提供的回调必须跟$on的回调为同一个才能移除这个回调的监听器；
- The provided callback must be the same one as the callback of $on to remove the listener of this callback;

**代码示例**
**Code example**

`$emit`、`$on`、`$off`常用于跨页面、跨组件通讯，这里为了方便演示放在同一个页面
`$emit`, `$on` and `$off` are commonly used for cross-page and cross-component communication, and are placed on the same page for easy demonstration

```html
	<template>
		<view class="content">
			<view class="data">
				<text>{{val}}</text>
			</view>
			<button type="primary" @click="comunicationOff">结束监听</button>
		</view>
	</template>
	
	<script>
		export default {
			data() {
				return {
					val: 0
				}
			},
			onLoad() {
				setInterval(()=>{
					uni.$emit('add', {
						data: 2
					})
				},1000)
				uni.$on('add', this.add)
			},
			methods: {
				comunicationOff() {
					uni.$off('add', this.add)
				},
				add(e) {
					this.val += e.data
				}
			}
		}
	</script>
	
	<style>
		.content {
			display: flex;
			flex-direction: column;
			align-items: center;
			justify-content: center;
		}
	
		.data {
			text-align: center;
			line-height: 40px;
			margin-top: 40px;
		}
	
		button {
			width: 200px;
			margin: 20px 0;
		}
	</style>
	
```


**注意事项**
**Precautions**
- uni.$emit、 uni.$on 、 uni.$once 、uni.$off 触发的事件都是 App 全局级别的，跨任意组件，页面，nvue，vue 等
- The events triggered by uni.$emit, uni.$on, uni.$once and uni.$off are all at the App global level, spanning arbitrary component, page, nvue, vue, etc.
- 使用时，注意及时销毁事件监听，比如，页面 onLoad 里边 uni.$on 注册监听，onUnload 里边 uni.$off 移除，或者一次性的事件，直接使用 uni.$once 监听
- When using, remember to destroy event listening to in time, for example, uni.$on registered listening to in the page onLoad, uni.$off removed in the page onUnload, or one-off events that use uni.$once to listen to directly
- 注意 uni.$on 定义完成后才能接收到 uni.$emit 传递的数据
- Note that the data passed by uni.$emit can only be received after uni.$on is defined
